language: node_js

before_install:
  # Export the C++11 compiler.
  - if [[ $TRAVIS_OS_NAME == "linux" ]]; then export CXX=g++-4.8; fi

cache:
  directories:
    - $TRAVIS_BUILD_DIR/node_modules
    - $HOME/.nvm
# Note: travis defaults used for install
# If custom install desired, include `npm install`

# Do two runs, one for testing and one for linting.
matrix:
  include:
  - node_js: 8
    env: TEST_TYPE=test
  - node_js: node 
    env: TEST_TYPE=test:coverage
  allow_failures:
  - node_js: node
    env: TEST_TYPE=lint:eslint
  - node_js: node
    env: TEST_TYPE=lint:prettier

before_script: 
  - if [[ $TEST_TYPE == 'lint:eslint' ]]; then yarn build; fi

script:
  # Run testing or linting depending on the environment.
  - npm run $TEST_TYPE
